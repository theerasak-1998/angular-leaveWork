<div class="inner-content">
  <!-- calender and addleave button --------------------------------------------------- -->

  <div nz-row nzJustify="end" class="headingcontent">
    <div nz-col nzSpan="7" nzPull="270px">
      <h2>รายการลาทั้งหมดของคุณ</h2>
    </div>
    <ng-template #contentTemplate>
      <ng-container *ngIf="decode.sex =='male'">
        <div class="headcount">
          <div class="gridcount">
            <span>ลาหยุดพักผ่อนประจำปี : </span>
            <span style="color: red;">{{sumLeave[6]}}</span>
            <span> วัน</span>
          </div>
          <div class="gridcount">
            <span>ลากิจ : </span>
            <span style="color: red;">{{sumLeave[0]}}</span>
            <span> วัน</span>
          </div>
          <div class="gridcount">
            <span>ลาป่วย : </span>
            <span style="color: red;">{{sumLeave[1]}}</span>
            <span> วัน</span>
          </div>
          <div class="gridcount">
            <span>ลาทำหมัน : </span>
            <span style="color: red;">{{sumLeave[2]}}</span>
            <span> วัน</span>
          </div>
          <div class="gridcount">
            <span>ลาฝึกอบรม : </span>
            <span style="color: red;">{{sumLeave[3]}}</span>
            <span> วัน</span>
          </div>
          <div class="gridcount">
            <span>ลารับราชการทหาร : </span>
            <span style="color: red;">{{sumLeave[4]}}</span>
            <span> วัน</span>
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="decode.sex =='female'">
        <div class="headcount">
          <div class="gridcount">
            <span>ลาหยุดพักผ่อนประจำปี : </span>
            <span style="color: red;">{{sumLeave[6]}}</span>
            <span> วัน</span>
          </div>
          <div class="gridcount">
            <span>ลากิจ : </span>
            <span style="color: red;">{{sumLeave[0]}}</span>
            <span> วัน</span>
          </div>
          <div class="gridcount">
            <span>ลาป่วย : </span>
            <span style="color: red;">{{sumLeave[1]}}</span>
            <span> วัน</span>
          </div>
          <div class="gridcount">
            <span>ลาทำหมัน : </span>
            <span style="color: red;">{{sumLeave[2]}}</span>
            <span> วัน</span>
          </div>
          <div class="gridcount">
            <span>ลาฝึกอบรม : </span>
            <span style="color: red;">{{sumLeave[3]}}</span>
            <span> วัน</span>
          </div>
          <div class="gridcount">
            <span>ลาคลอดบุตร : </span>
            <span style="color: red;">{{sumLeave[5]}}</span>
            <span> วัน</span>
          </div>
        </div>
      </ng-container>
    </ng-template>
    <div nz-col nzSpan="7" nzOffset="10">
      <button
        class="bts"
        nz-button
        nzSize="large"
        nz-popover
        nzPopoverTitle="จำนวนวันลาแต่ละประเภท"
        [nzPopoverContent]="contentTemplate"
        nzPopoverTrigger="hover"
        nzPopoverPlacement="left"
      >
        <span>ตรวจสอบจำนวนวัน</span></button
      ><button nz-button nzSize="large" (click)="goCalender()" class="bts">
        <span>Calendar</span></button
      ><button
        class="bts"
        nzDanger
        nzSize="large"
        nz-button
        nztype="primary"
        (click)="addLeave()"
      >
        <span>ทำรายการลา</span>
      </button>
    </div>
  </div>
  <br />
  <!----------------------------- table ------------------------------------------------------------ -->

  <div nz-row>
    <nz-table [nzData]="listorder" nzShowPagination="false">
      <thead>
        <tr style="width: 100%">
          <th style="width: 40px; text-align: center">ID</th>
          <th style="width: 200px; text-align: center">วันที่ยื่นคำร้อง</th>
          <th
            style="width: 400px;text-align: center;"
            nz-tooltip
            nzTooltipTitle="เดือน/วัน/ปี"
            nzTooltipPlacement="top"
          >
            วันที่ต้องการลา
          </th>
          <th style="width: 150px; text-align: center">จำนวนวัน</th>
          <th style="width: 220px; text-align: center">Description</th>
          <th style="width: 200px; text-align: center">สิ่งที่แนบมา</th>
          <th style="width: 270px; text-align: center">ประเภทการลา</th>
          <th style="width: 100px; text-align: center">สถานะ</th>
          <th style="width: 40px; text-align: center"></th>
          <th style="width: 4px; text-align: center"></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let value of listorder">
          <td style="text-align: center">{{ value.id }}</td>
          <td style="text-align: center">
            <nz-tag [nzColor]="'magenta'"
              >{{ value.created_at | date: "short" }}</nz-tag
            >
          </td>
          <td style="text-align: center">
            <nz-tag [nzColor]="'gold'"
              >{{ value.date_start | date: "shortDate" }} </nz-tag
            >-
            <nz-tag [nzColor]="'gold'"
              >{{ value.date_end | date: "shortDate" }}</nz-tag
            >
          </td>
          <td style="text-align: center">
            <div class="row">
              <p style="margin-top: 15px">{{ value.allday }} วัน</p>
            </div>
          </td>
          <td style="text-align: center;">{{ value.description }}</td>
          <td style="text-align: center;">
            <div *ngIf="value?.file">
              <img
                nz-image
                width="25px"
                height="25px"
                nzSrc="{{ value.file }}"
                alt=""
              />
            </div>
          </td>

          <!-- type ------------------------------------------------------->
          <td style="text-align: center">{{ value.type }}</td>

          <!-- <td >
          <div *ngIf="value.type == 'ลากิจ'">
            <span class="type_business">{{value.type}}</span>
          </div>
          <div *ngIf="value.type == 'ลาป่วย'">
            <span class="type_medic">{{value.type}}</span>
          </div>
          <div *ngIf="value.type == 'ลาพักร้อน'">
            <span class="type_summer">{{value.type}}</span>
          </div>
          </td> -->

          <!-- status ---------------------------------------------------->
          <td style="text-align: center">
            <div
              *ngIf="value.status_name == 'wait'"
              nz-tooltip
              nzTooltipTitle="wait"
              nzTooltipPlacement="top"
            >
              <i nz-icon nzType="clock-circle" nzTheme="outline"></i>
            </div>
            <div
              *ngIf="value.status_name == 'approve'"
              nz-tooltip
              nzTooltipTitle="approve"
              nzTooltipPlacement="top"
            >
              <i
                nz-icon
                [nzType]="'check-circle'"
                [nzTheme]="'twotone'"
                [nzTwotoneColor]="'#52c41a'"
              ></i>
            </div>
            <div
              *ngIf="value.status_name == 'cancel'"
              nz-tooltip
              nzTooltipTitle="cancel"
              nzTooltipPlacement="top"
            >
              <img
                src="../../../../assets/cancel.jpg"
                alt=""
                style="width: 15px"
              />
            </div>
          </td>
          <td style="text-align: center;">
            <ng-container *ngIf="value.check=='0'">
              <button
                _ngcontent-wba-c15=""
                class="btn btn-tmt-act btn-tmt-act-ed2"
                (click)="reData(value)"
              >
                <a nz-tooltip nzTooltipTitle="แก้ไข">
                  <i nz-icon nzType="edit" nzTheme="outline"></i>
                </a>
              </button>
            </ng-container>
            <ng-container *ngIf="value.check=='1'">
              <button
                _ngcontent-wba-c15=""
                class="btn btn-tmt-act btn-tmt-act-ed2"
                (click)="createMessage('warning')"
              >
                <a nz-tooltip nzTooltipTitle="แก้ไข">
                  <i nz-icon nzType="edit" nzTheme="outline"></i>
                </a>
              </button>
            </ng-container>
          </td>
          <td style="text-align: center;">
            <ng-container *ngIf="value.check=='0'">
              <button
                class="btn btn-tmt-act btn-tmt-act-ed"
                (click)="showDeleteConfirm(value.id, value)"
              >
                <a nz-tooltip nzTooltipTitle="ลบ">
                  <i nz-icon nzType="delete" nzTheme="outline"></i>
                </a>
              </button>
            </ng-container>
            <ng-container *ngIf="value.check=='1'"
              ><button
                class="btn btn-tmt-act btn-tmt-act-ed"
                (click)="createMessage2('error')"
              >
                <a nz-tooltip nzTooltipTitle="ลบ">
                  <i nz-icon nzType="delete" nzTheme="outline"></i>
                </a>
              </button>
            </ng-container>
          </td>
        </tr>
      </tbody>
    </nz-table>
  </div>
  <br />
  <nz-pagination
    [nzPageIndex]="1"
    [nzTotal]="count"
    (nzPageIndexChange)="click($event)"
  ></nz-pagination>
</div>
